<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>replumb.core documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Replumb</span> <span class="project-version">0.1.0</span></span></a></h1></div><div class="sidebar primary"><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>replumb</span></div></div></li><li class="depth-2 current"><a href="replumb.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="replumb.core.html#var-error-.3Estr"><div class="inner"><span>error-&gt;str</span></div></a></li><li class="depth-1"><a href="replumb.core.html#var-get-prompt"><div class="inner"><span>get-prompt</span></div></a></li><li class="depth-1"><a href="replumb.core.html#var-read-eval-call"><div class="inner"><span>read-eval-call</span></div></a></li><li class="depth-1"><a href="replumb.core.html#var-result-.3Estring"><div class="inner"><span>result-&gt;string</span></div></a></li><li class="depth-1"><a href="replumb.core.html#var-success.3F"><div class="inner"><span>success?</span></div></a></li><li class="depth-1"><a href="replumb.core.html#var-unwrap-result"><div class="inner"><span>unwrap-result</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">replumb.core</h1><div class="doc"><div class="markdown"></div></div><div class="public anchor" id="var-error-.3Estr"><h3>error-&gt;str</h3><div class="usage"><code>(error-&gt;str error)</code><code>(error-&gt;str error print-stack?)</code></div><div class="doc"><div class="markdown"><p>Return the message string of the input <code>js/Error</code>.</p></div></div></div><div class="public anchor" id="var-get-prompt"><h3>get-prompt</h3><div class="usage"><code>(get-prompt)</code></div><div class="doc"><div class="markdown"><p>Retrieves the repl prompt to display, according to the current namespace. Returns a string.</p></div></div></div><div class="public anchor" id="var-read-eval-call"><h3>read-eval-call</h3><div class="usage"><code>(read-eval-call callback source)</code><code>(read-eval-call opts callback source)</code></div><div class="doc"><div class="markdown"><p>Reads, evaluates and calls back with the evaluation result.</p>
<p>The first parameter is a map of configuration options, currently supporting:</p>
<ul>
  <li><code>:verbose</code> will enable the the evaluation logging, defaults to false.</li>
  <li><code>:load-fn!</code> will override ClojureScript&rsquo;s default *load-fn*.  It is a two-arity (fn [map cb] &hellip;) were map will contain:
    <pre><code>:name    ;; the name of the library (a symbol)
:macros  ;; modifier signaling a macros namespace load
:path    ;; munged relative library path (a string)
</code></pre>
    <p>Upon resolution the callback should be invoked with a map  containing the following keys:</p>
    <pre><code>:lang       ;; the language, :clj or :js
:source     ;; the source of the library (a string)
:cache      ;; optional, if a :clj namespace has been precompiled to :js, can
               give an analysis cache for faster loads.
:source-map ;; optional, if a :clj namespace has been precompiled to :js, can
               give a V3 source map JSON
</code></pre>
    <p>If the resource could not be resolved, the callback should be invoked with  nil. See ClojureScript&rsquo;s <code>cljs.js</code> namespace for further details.</p>
  </li>
</ul>
<p>The second parameter, <code>callback</code>, should be a 1-arity function which receives the result map, whose result keys will be:</p>
<pre><code>:success?  ;; a boolean indicating if everything went right
:value     ;; (if (success? result)) will contain the actual yield of the evaluation
:error     ;; (if (not (success? result)) will contain a js/Error
:form      ;; the evaluated form as data structure (not a string)
</code></pre>
<p>It initializes the repl harness if necessary.</p></div></div></div><div class="public anchor" id="var-result-.3Estring"><h3>result-&gt;string</h3><div class="usage"><code>(result-&gt;string result-map)</code><code>(result-&gt;string result-map print-stack?)</code></div><div class="doc"><div class="markdown"><p>Given a <code>result-map</code>, returns the result of an evaluation as string.</p></div></div></div><div class="public anchor" id="var-success.3F"><h3>success?</h3><div class="usage"><code>(success? result-map)</code></div><div class="doc"><div class="markdown"><p>Given a <code>result-map</code>, tells whether the evaluation was successful.</p></div></div></div><div class="public anchor" id="var-unwrap-result"><h3>unwrap-result</h3><div class="usage"><code>(unwrap-result result-map)</code></div><div class="doc"><div class="markdown"><p>Unwraps the result of an evaluation.</p>
<p>It returns the content of <code>:value</code> in case of success and the content of <code>:error</code> (a <code>js/Error</code>) in case of failure.</p></div></div></div></div></body></html>